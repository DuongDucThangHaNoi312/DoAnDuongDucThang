/*
jQuery fullsizable plugin v1.6
  - take full available browser space to show images

(c) 2011-2013 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var b,h,v,j,c,w,e,m,n,k,p,d,q,r,g,s,l,t,u;b=jQuery;h=b('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');s=null;e=[];c=0;t=d=null;g=function(){var a;a=e[c];null==a.ratio&&(a.ratio=(a.height/a.width).toFixed(2));if(b(window).height()/a.ratio>b(window).width())return b(a).width(b(window).width()),b(a).height(b(window).width()*a.ratio),b(a).css("margin-top",(b(window).height()-b(a).height())/2);b(a).height(b(window).height());b(a).width(b(window).height()/a.ratio);
return b(a).css("margin-top",0)};m=function(a){27===a.keyCode&&j();37===a.keyCode&&r();if(39===a.keyCode)return k()};r=function(){if(0<c)return l(e[c-1],-1)};k=function(){if(c<e.length-1)return l(e[c+1],1)};l=function(a,f){null==f&&(f=1);c=a.index;b("#fullsized_image_holder").hide();b("#fullsized_image_holder").html(a);d.navigation&&(b("#fullsized_go_prev").toggle(0!==c),b("#fullsized_go_next").toggle(c!==e.length-1));if(null!=a.loaded)return b("#jquery-fullsizable").removeClass("fullsized_spinner"),
g(),b("#fullsized_image_holder").fadeIn("fast"),q(f);b("#jquery-fullsizable").addClass("fullsized_spinner");a.onload=function(){g();b("#fullsized_image_holder").fadeIn("slow",function(){return b("#jquery-fullsizable").removeClass("fullsized_spinner")});this.loaded=!0;return q(f)};return a.src=a.buffer_src};q=function(a){if(1===a&&c<e.length-1)a=e[c+1];else if((-1===a||c===e.length-1)&&0<c)a=e[c-1];else return;a.onload=function(){return this.loaded=!0};if(""===a.src)return a.src=a.buffer_src};p=function(a){b(window).bind("resize",
g);l(a);return b("#jquery-fullsizable").hide().fadeIn(function(){null!=d.detach_id&&(t=b(window).scrollTop(),b("#"+d.detach_id).css("display","none"),g());"close"===d.clickBehaviour&&b("#jquery-fullsizable").bind("click",j);"next"===d.clickBehaviour&&b("#jquery-fullsizable").bind("click",k);return b(document).bind("keydown",m)})};j=function(){null!=d.detach_id&&(b("#"+d.detach_id).css("display","block"),b(window).scrollTop(t));"close"===d.clickBehaviour&&b("#jquery-fullsizable").unbind("click",j);
"next"===d.clickBehaviour&&b("#jquery-fullsizable").unbind("click",k);b("#jquery-fullsizable").fadeOut();v();b("#jquery-fullsizable").removeClass("fullsized_spinner");b(document).unbind("keydown",m);return b(window).unbind("resize",g)};n=function(){e.length=0;return(d.dynamic?b(d.dynamic):s).each(function(){var a;a=new Image;a.buffer_src=b(this).attr("href");a.index=e.length;e.push(a);if(d.openOnClick)return b(this).click(function(b){b.preventDefault();return p(a)})})};b.fn.fullsizable=function(a){d=
b.extend({detach_id:null,navigation:!1,openOnClick:!0,closeButton:!1,clickBehaviour:"close",allowFullscreen:!0,dynamic:null},a||{});b("body").append(h);d.navigation&&(h.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>'),b("#fullsized_go_prev").click(function(a){a.preventDefault();a.stopPropagation();return r()}),b("#fullsized_go_next").click(function(a){a.preventDefault();a.stopPropagation();return k()}));d.closeButton&&(h.append('<a id="fullsized_close" href="#close"></a>'),
b("#fullsized_close").click(function(a){a.preventDefault();a.stopPropagation();return j()}));d.allowFullscreen&&w()&&(h.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>'),b("#fullsized_fullscreen").click(function(a){a.preventDefault();a.stopPropagation();return u()}));s=this;d.dynamic||n();return this};b.fullsizableDynamic=function(a,f){null==f&&(f={});return b(a).fullsizable(b.extend(f,{dynamic:a}))};b.fullsizableOpen=function(a){var f,c,h,g;d.dynamic&&n();g=[];c=0;for(h=e.length;c<h;c++)f=
e[c],f.buffer_src===b(a).attr("href")?g.push(p(f)):g.push(void 0);return g};w=function(){var a;a=h.get(0);return a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen?!0:!1};v=function(){return u(!0)};u=function(a){var b;b=h.get(0);if(b.requestFullScreen)return document.fullScreen||a?document.exitFullScreen():b.requestFullScreen();if(b.webkitRequestFullScreen)return document.webkitIsFullScreen||a?document.webkitCancelFullScreen():b.webkitRequestFullScreen();if(b.mozRequestFullScreen)return document.mozFullScreen||
a?document.mozCancelFullScreen():b.mozRequestFullScreen()}}).call(this);
